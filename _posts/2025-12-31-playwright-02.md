---
layout: posts
title: "[Playwright] 로그인 테스트 실습"
categories: ['sqa']
tags: [playwright]
---

**Playwright 테스트 코드 작성 패턴** 을 실제 코드에 적용해

**로그인 시나리오 하나를 끝까지 실행하고 결과를 확인하는 것**을 목표로 한다.

테스트 시나리오: **로그인 화면 진입 → 로그인 시도 → 결과 확인**

---

## 1. 테스트 시나리오 정의

이번 테스트에서 검증하려는 흐름은 단순하다.

1. 사이트 접속
2. 아이디 / 비밀번호 입력
3. 로그인 버튼 클릭
4. 로그인 결과 확인

이 시나리오가 **테스트 코드에서 그대로 읽히는 것**이 목표다.

---

## 2. 사전 준비

### 2-1. Playwright 설치

```bash
npm init playwright@latest
```

설치 중:

- TypeScript 사용 권장
- 기본 브라우저 모두 설치

---

### 2-2. 기본 디렉터리 구조

```
playwright/
├─ tests/
│  └─ login.spec.ts
│
├─ pages/
│  └─ login.page.ts
│
├─ playwright.config.ts
└─ package.json
```

---

## 3. Page Object 작성 (화면 제어 담당)

테스트에 사용한 사이트는 **메인 페이지 진입 시점에 이미 로그인 입력 영역이 노출**되어 있다.

따라서 별도의 로그인 페이지 이동 없이,

**메인 페이지 = 로그인 페이지**로 간주하고 테스트를 구성한다.

### pages/login.page.ts

```tsx
import { Page } from '@playwright/test';

export class LoginPage {
  readonly page: Page;

  constructor(page: Page) {
    this.page = page;
  }

  async goto() {
    await this.page.goto('https://skwinwin.com/index.asp');
  }

  async login(id: string, password: string) {
    await this.page.getByRole('textbox', { name: 'ID를 입력해 주세요' }).fill('userid');
    await this.page.getByRole('textbox', { name: '비밀번호를 4자리 이상 입력해 주세요' }).fill('userpw');
    await this.page.getByRole('link', { name: 'LOGIN' }).click();
  }

  async isLoginSuccess() {
  await this.page.getByRole('banner').getByRole('link', { name: 'SK 동반성장아카데미' }).waitFor();
  return true;
}

}
```

### 작성 포인트

- 메인 페이지 진입 즉시 로그인 요소 사용
- 페이지 이동 로직 제거
- 로그인 행위만 Page 객체 책임으로 유지

---

## 4. 테스트 코드 작성 (시나리오 담당)

### tests/login.spec.ts

```tsx
import { test, expect } from '@playwright/test';
import { LoginPage } from '../pages/login.pages';

test('메인 페이지 로그인 시나리오 검증', async ({ page }) => {
  const loginPage = new LoginPage(page);

  await loginPage.goto();
  await loginPage.login('test_id', 'test_password');

  const result = await loginPage.isLoginSuccess();
  expect(result).toBeTruthy();
});
```

### 이 테스트의 특징

- 불필요한 페이지 이동 제거
- 실제 사용자 로그인 흐름과 동일
- 테스트 코드가 더 단순해짐

---

## 5. 테스트 실행 방법

```bash
npx playwright test
# --headed 옵션을 추가하면 브라우저를 보면서 진행할 수 있음
```

<img width="334" height="148" alt="image" src="https://github.com/user-attachments/assets/99b247ea-972e-4751-9398-1a33ebdddd12" />


또는 UI 모드 실행:

```bash
npx playwright test --ui
```

<img width="1062" height="623" alt="image" src="https://github.com/user-attachments/assets/ea44407e-d0b3-476c-8080-e23424d26069" />


---

## 6. 실행 결과 확인

### 6-1. 콘솔 결과

- 테스트 성공 / 실패 여부 출력
- 실패 시 에러 지점 명확히 표시

---

### 6-2. HTML 리포트 확인

```bash
npx playwright show-report
```

<img width="986" height="235" alt="image" src="https://github.com/user-attachments/assets/35bdc893-8684-4ef9-9b44-26760f01085d" />


리포트에서 확인 가능한 항목:

- 테스트 실행 결과
- 실패 시 스크린샷
- 실행 시간

<img width="996" height="543" alt="image" src="https://github.com/user-attachments/assets/0a4439bc-a652-4af8-ad97-b7933669d8aa" />


---

## 7. 실무 관점에서 이 예제가 의미하는 것

이 로그인 테스트는 단순해 보이지만,

실무 자동화의 기본 요소를 모두 포함한다.

- Page Object 패턴 적용
- 시나리오 중심 테스트 작성
- 실행 → 결과 → 리포트 확인

이 구조를 그대로 확장하면:

- VM 생성
- 스토리지 마운트
- 설정 변경

같은 복잡한 테스트도 안정적으로 관리할 수 있다.

---

## 정리

이번 문서는:

- Playwright 테스트 패턴을
- 실제 실행 가능한 코드로
- 끝까지 검증해본 예제다.

다음 단계에서는:

- 로그인 세션 재사용
- 실패 케이스 분리
- 네트워크 요청 검증

같은 **실무 확장 패턴**으로 이어갈 수 있다.
