---
layout: posts
title: \[Cloud Service] VM SSH 접근
categories: ['cloud']
tags: [vm]
---

클라우드 서비스 테스트를 진행하면서 VM(Virtual Machine)은 가장 기본이 되는 인프라 리소스다. 콘솔 UI에서 VM을 생성·삭제하는 것만으로는 실제 서비스 동작을 검증했다고 보기 어렵고, **직접 VM에 접속해 내부 상태를 확인하는 과정**이 필요하다.

SQA 입장에서 VM SSH 연결은 운영이나 개발을 위한 작업이라기보다, 아래 항목을 확인하기 위한 **기본 검증 단계**에 해당한다.

- VM이 정상적으로 생성·기동되었는지
- 접근 제어(키 기반 인증)가 의도대로 동작하는지
- 부하 상황에서 VM 리소스가 정상 범위 내에서 동작하는지

아래는 클라우드 테스트에서 일반적으로 수행하는 **VM SSH 접근과 접속 후 최소한의 확인 작업**을 정리한다.

---

## 1. VM(Virtual Machine)

VM은 물리 서버 자원을 가상화하여 제공하는 컴퓨팅 리소스다. CPU, 메모리, 디스크, 네트워크 자원을 논리적으로 분리해 하나의 독립된 서버처럼 사용한다.

클라우드 환경에서 VM은 보통 다음과 같은 용도로 활용된다.

- 애플리케이션 실행 환경
- 테스트용 임시 서버
- 데이터 처리 및 배치 작업 노드

SQA 관점에서는 VM을 설정 결과가 실제로 반영되는 대상으로 바라보는 것이 핵심이다.

---

## 2. 클라우드 환경에서의 SSH 접속 방식

대부분의 클라우드 서비스에서는 보안상의 이유로 **퍼블릭 키 / 프라이빗 키 기반 SSH 인증**을 기본으로 사용한다.

### 키 기반 인증 개념

- **프라이빗 키**: 로컬 PC에 보관 (외부 유출 금지)
- **퍼블릭 키**: VM 생성 시 서버에 등록

SSH 접속 시 서버는 퍼블릭 키를 기준으로 요청을 검증하고, 클라이언트는 프라이빗 키로 이를 증명한다.

이 방식이 정상 동작하는지 확인하는 것 자체가 하나의 테스트 포인트가 된다.

---

## 3. 로컬 환경에서 VM에 SSH로 접근하는 기본 흐름

### ① 사전 준비

- VM 생성 완료 상태
- VM에 할당된 IP 정보
- 접속 계정 정보 (예: ubuntu, ec2-user 등)
- 프라이빗 키 파일

---

### ② 퍼블릭 키 / 프라이빗 키 기반 SSH 접속

1. 프라이빗 키 권한 설정
    
    ```bash
    chmod 400 key.pem
    ```
    
2. SSH 접속 실행
    
    ```bash
    ssh -i key.pem user@VM_IP
    ```
    
3. 정상 접속 시 VM 쉘 접근 완료

이 단계에서는 단순히 접속이 되는지만 보지 않고,

- 잘못된 키로 접근 시 차단되는지
- 허용된 계정 외 접근이 제한되는지
    
    등의 접근 제어도 함께 확인한다.
    

---

## 4. SSH 접속 후 시스템 상태 검증 (SQA 관점)

SSH 접속은 목적이 아니라 **검증을 시작하기 위한 진입 수단**이다. 이 단계에서는 VM이 단순히 켜져 있는지를 넘어서, 클라우드 콘솔에서 설정한 값들이 **OS 레벨에서 의도대로 반영되었는지**를 확인한다.

아래 항목들은 실제 클라우드 서비스 테스트에서 비교적 빈번하게 확인하는 포인트들이다.

---

### ① 리소스 부하 확인 (stress)

`stress` 명령어를 사용해 CPU, 메모리 등에 인위적인 부하를 발생시킨다.

확인 목적은 성능 측정이 아니라 다음과 같다.

- 부하 상황에서도 VM이 정상적으로 응답하는지
- 클라우드 콘솔(UI) 메트릭과 실제 리소스 사용량이 일치하는지
- 임계 상황에서 VM이 비정상 종료되지 않는지

이를 통해 **모니터링 지표의 신뢰성**을 함께 검증한다.

---

### ② 파일시스템 유형 확인 (ext4, xfs 등)

디스크가 어떤 파일시스템으로 마운트되었는지는 스토리지 설정 검증의 기본이다.

- ext4, xfs 등 설정된 파일시스템 유형이 맞는지
- 콘솔에서 선택한 옵션이 실제 OS에 반영되었는지

특히 스토리지 유형 테스트나 성능 이슈 분석 시 중요한 확인 포인트가 된다.

---

### ③ 디스크 용량 및 마운트 상태 확인

클라우드 콘솔에서 설정한 디스크 용량이 실제 VM에 그대로 적용되었는지 확인한다.

- 디스크 크기 불일치 여부
- 파티션 및 마운트 상태 정상 여부
- 예상치 못한 추가 디스크 또는 누락 여부

이는 스토리지 확장, 축소 시 회귀 테스트에서도 자주 활용된다.

---

### ④ 네트워크 IP 대역 확인

VM에 할당된 IP가 **설정한 서브넷 CIDR 대역에 포함되는지** 확인한다.

- 예상 IP 범위와 실제 할당 IP 비교
- 다중 NIC 환경에서 인터페이스별 설정 확인

네트워크 설정 오류는 SSH 접속 자체는 되지만 서비스 통신이 안 되는 형태로 나타나는 경우가 많아 반드시 확인한다.

---

### ⑤ 서브넷 간 통신 여부 확인 (A-B 통신)

서로 다른 서브넷에 위치한 VM 간 통신이 정책에 맞게 동작하는지 확인한다.

- 동일 VPC 내 서브넷 간 통신 가능 여부
- 방화벽, 보안 그룹, ACL 설정 반영 여부

이는 네트워크 보안 설정이 실제 트래픽에 어떻게 적용되는지를 검증하는 단계다.

---

### ⑥ 쉘 스크립트 적용 여부 확인

VM 생성 시 또는 이후에 적용한 쉘 스크립트가 정상 실행되었는지 확인한다.

- 초기 설정 스크립트 실행 여부
- 패키지 설치, 환경 변수 설정 반영 여부

자동화 기반 환경에서는 **스크립트 미적용이 다수의 장애 원인**이 되므로 중요도가 높다.

---

### ⑦ 멀티스레드 및 병렬 처리 관점 확인

부하 또는 특정 작업 수행 시 VM이 멀티스레드 환경에서 정상 동작하는지 확인한다.

- CPU 코어 수 대비 스레드 활용 여부
- 병렬 작업 시 비정상 종료 또는 병목 발생 여부

이는 단순 인프라 테스트를 넘어, **실제 서비스 워크로드를 가정한 검증**에 가깝다.
