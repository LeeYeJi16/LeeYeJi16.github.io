---
layout: posts
title: "[Cloud Service] Hadoop Cluster 연동"
categories: ['cloud']
tags: [hadoop]
---

Hadoop 클러스터는 단일 VM 단위 테스트와 달리, **여러 노드와 여러 컴포넌트가 함께 동작하는 분산 시스템**이다. 따라서 SQA 관점에서의 Hadoop 테스트는 개별 기능 확인보다는, **구성 요소들이 의도한 구조로 묶여 정상적으로 연동되는지**를 확인하는 데 초점이 맞춰진다.

아래는 테스트 시 일반적으로 확인했던 **Hadoop 클러스터 기본 구조와 연동 포인트**를 정리한다.

---

## 1. Hadoop 기본 구조

Hadoop은 크게 **스토리지 계층(HDFS)** 과 **리소스 관리/처리 계층(YARN)** 으로 구성된다.

### ① HDFS (Hadoop Distributed File System)

- NameNode: 메타데이터 관리 (파일 위치, 블록 정보)
- DataNode: 실제 데이터 저장

확인 포인트:

- NameNode / DataNode 역할 분리 여부
- DataNode 다중 구성 시 정상 인식 여부

---

### ② YARN (Yet Another Resource Negotiator)

- ResourceManager: 클러스터 자원(CPU, 메모리) 관리
- NodeManager: 각 노드의 자원 상태 보고 및 컨테이너 관리

확인 포인트:

- 클러스터 전체 리소스 인식 여부
- 노드 수와 자원 정보가 정상 반영되는지

---

## 2. Hadoop 클러스터 구성 개념

클라우드 환경에서 Hadoop 클러스터는 보통 다음과 같은 형태로 구성된다.

- Master 노드: NameNode, ResourceManager
- Worker 노드: DataNode, NodeManager

SQA 테스트에서는 클러스터 생성 시 설정한 값들이 실제 구성에 정확히 반영되었는지가 핵심이다.

---

## 3. Hadoop 클러스터 생성 시 주요 설정 포인트

### ① HDFS 관련 설정

- 복제 계수 (replication factor)
- 블록 사이즈
- NameNode / DataNode 디렉터리 설정

확인 포인트:

- 설정 값이 기본값으로 돌아가지 않았는지
- 노드 수 대비 복제 계수 설정 적합성

---

### ② YARN 관련 설정

- NodeManager 메모리 / CPU 할당량
- 컨테이너 리소스 제한
- 스케줄러 설정

확인 포인트:

- 실제 노드 리소스와 설정 값 간 불일치 여부
- 과도한 리소스 할당으로 인한 기동 실패 여부

---

### ③ 클러스터 네트워크 구성

- 노드 간 내부 통신 가능 여부
- 포트 오픈 상태
- 보안 그룹 / 방화벽 설정 반영 여부

분산 시스템 특성상, 네트워크 설정 오류는 가장 빈번한 장애 원인이다.

---

## 4. HDFS 기본 동작 확인

클러스터 생성 후, HDFS가 정상 동작하는지 확인한다.

```bash
hdfs dfs -ls /
```

테스트용 디렉터리 생성:

```bash
hdfs dfs -mkdir /test
```

파일 업로드 테스트:

```bash
hdfs dfs -put local_file.txt /test/
```

확인 포인트:

- 파일 업로드 성공 여부
- DataNode에 블록이 분산 저장되는지

---

## 5. YARN 기반 작업 실행 확인

YARN이 정상적으로 동작하는지 확인하기 위해 간단한 작업을 실행한다.

```bash
yarn application -list
```

작업 실행 후 확인 포인트:

- 애플리케이션 상태 변화
- 리소스 할당 및 해제 정상 여부

이는 실제 대규모 연산 테스트가 아니라, **리소스 관리 흐름 확인**이 목적이다.

---

## 6. 외부 시스템 연동 및 활용 방식 (MySQL, Data Catalog 등)

Hadoop 클러스터는 단독 분석 환경이라기보다, **외부 시스템과 연동되어 데이터를 수집·관리·활용하는 허브 역할**을 한다. 따라서 SQA 관점에서는 단순히 "연결된다"를 넘어서, **연동 이후 실제로 어떤 흐름으로 사용되는지**까지 확인하는 것이 중요하다.

---

### ① MySQL 연동 및 활용 방식

MySQL은 Hadoop 환경에서 주로 다음 용도로 활용된다.

- 서비스 메타데이터 저장소
- 배치 작업 결과 저장
- 외부 시스템과의 중간 데이터 교환 지점

일반적인 활용 흐름은 다음과 같다.

1. Hadoop 작업이 HDFS 데이터를 처리
2. 처리 결과를 MySQL 테이블로 적재
3. 외부 서비스 또는 관리 콘솔에서 MySQL 데이터 조회

SQA 테스트에서는 아래 포인트를 중점적으로 확인한다.

- Hadoop 노드에서 MySQL 접근 가능 여부
- 인증 정보 적용 및 권한 설정 정상 여부
- 간단한 읽기/쓰기 쿼리 수행 가능 여부
- 작업 실패 시 재시도 또는 에러 처리 방식

이를 통해 Hadoop 클러스터가 **외부 시스템과 데이터 파이프라인을 구성할 수 있는지**를 검증한다.

---

### ② Data Catalog 연동 및 활용 방식

Data Catalog는 Hadoop 환경에 적재된 데이터를 **사람이 이해할 수 있는 형태로 정리하는 계층**이다.

주요 활용 방식은 다음과 같다.

- HDFS 경로 기반 데이터 수집
- 테이블, 스키마, 파티션 정보 자동 등록
- 데이터 변경 사항 추적

일반적인 흐름은 다음과 같다.

1. HDFS에 신규 데이터 적재
2. Data Catalog가 메타데이터 수집
3. 사용자 또는 분석 도구에서 데이터 탐색

SQA 테스트에서는 다음을 확인한다.

- 신규 데이터가 Catalog에 정상 반영되는지
- 스키마 변경 시 메타데이터 갱신 여부
- 삭제/변경 데이터가 지연 없이 동기화되는지

이는 Hadoop 클러스터가 **분석 친화적인 데이터 플랫폼으로 동작하는지**를 확인하는 단계다.

---

### ② Data Catalog 연동

- HDFS 내 데이터 메타정보 수집
- 테이블, 스키마 인식 여부

확인 포인트:

- 신규 데이터 반영 여부
- 메타데이터 동기화 정상 여부

---

## 7. 테스트 관점 정리

Hadoop 클러스터 테스트에서 중점적으로 확인한 부분은 다음과 같다.

- 클러스터 구성 요소 간 정상 연동
- 설정 값과 실제 동작 간 정합성
- 외부 시스템과의 연결 안정성

분산 환경 테스트에서는 개별 기능보다, **전체 흐름이 끊기지 않는지**를 확인하는 것이 중요하다.
